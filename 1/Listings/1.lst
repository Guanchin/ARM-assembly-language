


ARM Macro Assembler    Page 1 


    1 00000000                 AREA             led,code,readonly
    2 00000000                 entry
    3 00000000         ; Set sysclk to DIV/4, use PLL, XTAL_16 MHz, OSC_MAIN
    4 00000000         ; system control base is 0x400FE000, offset 0x60
    5 00000000         ; bits[26:23]= 0x3
    6 00000000         ; bit[22] = 0x1
    7 00000000         ; bit[13] = 0x0
    8 00000000         ; bit[11] = 0x0
    9 00000000         ; bits[10:6] = 0x15
   10 00000000         ; bits[5:4] = 0x0
   11 00000000         ; bit[0] = 0x0
   12 00000000         ; This all translates to a value of 0x01C00540
   13 00000000         ;MOVW r0, #0xE000
   14 00000000         ;MOVT r0, #0x400F
   15 00000000 E59F0084        ldr              r0,=0x400FE00
   16 00000004         ;MOVW r2, #0x60 ; offset 0x60 for this register
   17 00000004 E3A02060        MOV              r2, #0x60
   18 00000008         ;MOVW r1, #0x0540
   19 00000008         ;MOVT r1, #0x01C0;
   20 00000008 E59F1080        ldr              r1,=0x1c00540
   21 0000000C E7801002        STR              r1, [r0, r2] ; write the regist
                                                            er’s contents
   22 00000010         ; Enable GPIOF
   23 00000010         ; RCGCGPIO (page 339)
   24 00000010         ;MOVW r2, #0x608 ; offset for this register
   25 00000010 E59F207C        ldr              r2,=0x608
   26 00000014         ;LDR r1, [r0, r2] ; grab the register contents
   27 00000014 E3811020        ORR              r1, r1, #0x20 ; enable GPIOF cl
                                                            ock,port line F(PF)
                                                            
   28 00000018         ;STR r1, [r0, r2]
   29 00000018         
   30 00000018         ; Set the direction using GPIODIR (page 661)
   31 00000018         ; Base is 0x40025000
   32 00000018         ;MOVW r0, #0x5000
   33 00000018         ;MOVT r0, #0x4002
   34 00000018 E59F0078        ldr              r0,=0x40025000
   35 0000001C         
   36 0000001C         ;MOVW r2, #0x400 ; offset for this register
   37 0000001C E3A02B01        ldr              r2,=0x400
   38 00000020         ;ldr r3,[r0,r2];read
   39 00000020 E59F1074        ldr              r1, =0x111  ;0000 bgr0=0x0000 1
                                                            110
   40 00000024 E1833001        orr              r3,r1       ;modify
   41 00000028         ;STR r3, [r0, r2] ; set 1 or 2 or 3 for output,write,0x4
                       0025000,str 0xE
   42 00000028         
   43 00000028         ;set the GPIODEN lines
   44 00000028         ;MOVW r2, #0x51c ; offset for this register
   45 00000028 E59F2070        ldr              r2,=0x51c
   46 0000002C         ;ldr r3,[r0,r2];read
   47 0000002C E1833001        orr              r3,r1       ;modify
   48 00000030         ;STR r3, [r0, r2] ; set 1 and 2 and 3 for I/O,write
   49 00000030         ;-----------------------------
   50 00000030 E3A00101        ldr              r0,=0x40000000
   51 00000034 E0477007        SUB              r7, r7, r7  ; clear out r7
   52 00000038 E3A06C01        ldr              r6, =0x100  ; start with LED = 
                                                            0b10
   53 0000003C         ;0b00000010 red,0b00000100 green,0b00001000 blue,



ARM Macro Assembler    Page 2 


   54 0000003C         mainloop
   55 0000003C         ; turn on the LED
   56 0000003C         ; if bits [9:2] affect the writes, then the address
   57 0000003C         ; is offset by 0x38
   58 0000003C E5806038        STR              r6, [r0, #0x38] ; base + 0x38 s
                                                            o [9:2] = 0b0011100
                                                            0
   59 00000040         ;MOVT r7, #0xF4 ; set counter to 0xF40000,delay=0xF40000
                       *2Clock Cycles/16MHZ
   60 00000040 E3150001        tst              r5,#1
   61 00000044 0A000000        beq              RGB
   62 00000048 1A000003        bne              BGR
   63 0000004C         RGB
   64 0000004C         ; change colors
   65 0000004C E3560001        CMP              r6, #1      ;3.99769794,~=8M Hz
                                                            
   66 00000050         ;ITE LT
   67 00000050 C1A06226        LSRGT            r6, r6, #4  ; LED = LED * 2
   68 00000054 D2855001        ADDLE            r5, #1      ; reset to 2 otherw
                                                            ise
   69 00000058 EA000004        B                out
   70 0000005C         BGR
   71 0000005C         ; change colors
   72 0000005C E3A07C01        ldr              r7,=0x100
   73 00000060 E1560007        CMP              r6,r7       ;3.99769794,~=8M Hz
                                                            
   74 00000064         ;ITE GT
   75 00000064 B1A06206        LSLLT            r6, r6, #4  ; LED = LED * 2
   76 00000068 A2855001        ADDGE            r5, #1      ; reset to 2 otherw
                                                            ise
   77 0000006C EAFFFFFF        B                out
   78 00000070         out
   79 00000070         ;0.00000206
   80 00000070 EB000001        BL               DELAY
   81 00000074         
   82 00000074 EAFFFFF0        B                mainloop
   83 00000078 EAFFFFFE 
                       stop    B                stop
   84 0000007C         DELAY
   85 0000007C E59F7020        ldr              r7,=0x895440 ;3M
   86 00000080         spin
   87 00000080 E2577001        SUBS             r7, r7, #1
   88 00000084 1AFFFFFD        BNE              spin
   89 00000088 E12FFF1E        bx               lr
   90 0000008C                 END
              0400FE00 
              01C00540 
              00000608 
              40025000 
              00000111 
              0000051C 
              00895440 
Command Line: --debug --xref --diag_suppress=9931 --apcs=interwork --depend=.\o
bjects\1.d -o.\objects\1.o -IC:\Keil_v5\ARM\RV31\INC -IC:\Keil_v5\ARM\CMSIS\Inc
lude -IC:\Keil_v5\ARM\INC\Philips --predefine="__EVAL SETA 1" --predefine="__UV
ISION_VERSION SETA 528" --list=.\listings\1.lst 1.s



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

BGR 0000005C

Symbol: BGR
   Definitions
      At line 70 in file 1.s
   Uses
      At line 62 in file 1.s
Comment: BGR used once
DELAY 0000007C

Symbol: DELAY
   Definitions
      At line 84 in file 1.s
   Uses
      At line 80 in file 1.s
Comment: DELAY used once
RGB 0000004C

Symbol: RGB
   Definitions
      At line 63 in file 1.s
   Uses
      At line 61 in file 1.s
Comment: RGB used once
led 00000000

Symbol: led
   Definitions
      At line 1 in file 1.s
   Uses
      None
Comment: led unused
mainloop 0000003C

Symbol: mainloop
   Definitions
      At line 54 in file 1.s
   Uses
      At line 82 in file 1.s
Comment: mainloop used once
out 00000070

Symbol: out
   Definitions
      At line 78 in file 1.s
   Uses
      At line 69 in file 1.s
      At line 77 in file 1.s

spin 00000080

Symbol: spin
   Definitions
      At line 86 in file 1.s
   Uses
      At line 88 in file 1.s
Comment: spin used once
stop 00000078




ARM Macro Assembler    Page 2 Alphabetic symbol ordering
Relocatable symbols

Symbol: stop
   Definitions
      At line 83 in file 1.s
   Uses
      At line 83 in file 1.s
Comment: stop used once
8 symbols
342 symbols in table
